<!-- build time:Wed Jan 01 2020 05:30:24 GMT+0000 (Coordinated Universal Time) --><!DOCTYPE html><html><head><meta charset="utf-8"><title>Zhy Blog</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta property="og:type" content="website"><meta property="og:title" content="Zhy Blog"><meta property="og:url" content="https:&#x2F;&#x2F;liserlzhy.github.io&#x2F;page&#x2F;3&#x2F;index.html"><meta property="og:site_name" content="Zhy Blog"><meta property="og:locale" content="zh-CN"><meta name="twitter:card" content="summary"><link rel="alternate" href="/blog/atom.xml" title="Zhy Blog" type="application/atom+xml"><link rel="icon" href="/blog/css/images/logo.png"><link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css"><link rel="stylesheet" href="/blog/css/style.css"><meta name="generator" content="Hexo 4.0.0"></head></html><body><div id="container"><div id="wrap"><header id="header"><div id="slideout-menu"><ul><li><a class="main-nav-link" href="/blog/">首页</a></li><li><a class="main-nav-link" href="/blog/archives">归档</a></li><li><a class="main-nav-link" href="/blog/favorite">收藏</a></li><li><div class="site_search"><div class="form-group"><input type="text" id="slidedown-search-input" name="q" results="0" placeholder="搜索" class="st-search-input st-default-search-input form-control"></div><div id="slidedown-search-result"></div></div></li></ul></div><nav id="header-nav"><div id="logo-img"><label class="on-off noselect" for="on-off"><input id="on-off" type="checkbox" onchange='return window.location="/blog/"'> <span class="on-off-circle"></span></label></div><div id="menu-icon"><a class="icon icon-bars"></a></div><ul><li><a class="main-nav-link" href="/blog/">首页</a></li><li><a class="main-nav-link" href="/blog/archives">归档</a></li><li><a class="main-nav-link" href="/blog/favorite">收藏</a></li><li><div id="search-icon"><a class="icon icon-search" title="搜索"></a></div></li></ul></nav><div class="site_search"><div><input type="text" id="nav-search-input" name="q" results="0" placeholder="搜索"></div><div id="nav-search-result"></div></div></header><div class="outer"><section id="main"><div><article id="post-computer/DOS" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><time class="article-date" datetime="2019-09-18T18:08:50.000Z" itemprop="datePublished">2019-09-18</time><div class="article-category"><a class="article-category-link" href="/blog/categories/computer/">computer</a></div></div><div class="article-inner"><header class="article-header"><h1 itemprop="name"><a class="article-title" href="/blog/2019/09/18/computer/DOS/">DOS 命令</a></h1></header><div class="article-entry" itemprop="articleBody"><h2 id="内部命令和外部命令"><a href="#内部命令和外部命令" class="headerlink" title="内部命令和外部命令"></a>内部命令和外部命令</h2><ul><li>内部命令<ul><li>系统自带的命令，例如ping mv等</li></ul></li><li>外部命令<ul><li>放在window\system32，可自行扩展，如下载wget.exe放在该目录下可调用</li></ul></li></ul><h2 id="基本命令"><a href="#基本命令" class="headerlink" title="基本命令"></a>基本命令</h2><p>查看帮助信息</p><pre><code>命令 /?</code></pre><table><thead><tr><th align="left">命令</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left">title</td><td align="left">设置console上面的title</td></tr><tr><td align="left">mode</td><td align="left">配置控制台参数，如控制台窗口大小</td></tr><tr><td align="left">color</td><td align="left">设置窗口颜色</td></tr><tr><td align="left">cd</td><td align="left">切换目录</td></tr><tr><td align="left">dir</td><td align="left">查看当前目录下的文件</td></tr><tr><td align="left">copy</td><td align="left">复制文件（不包括文件夹）</td></tr><tr><td align="left">xcopy</td><td align="left">复制文件（包括文件夹）</td></tr><tr><td align="left">rename</td><td align="left">（缩写 ren）重命名</td></tr><tr><td align="left">move</td><td align="left">移动文件</td></tr><tr><td align="left">replace</td><td align="left">替代文件</td></tr><tr><td align="left">type</td><td align="left">查看文件内容</td></tr><tr><td align="left">del</td><td align="left">删除文件</td></tr><tr><td align="left">rd</td><td align="left">删除文件夹</td></tr><tr><td align="left">md</td><td align="left">创建文件</td></tr></tbody></table><h2 id="set设置局部变量"><a href="#set设置局部变量" class="headerlink" title="set设置局部变量"></a>set设置局部变量</h2><h3 id="定义变量"><a href="#定义变量" class="headerlink" title="定义变量"></a>定义变量</h3><pre><code>set name=xxx</code></pre><h3 id="查看变量"><a href="#查看变量" class="headerlink" title="查看变量"></a>查看变量</h3><p>set不带参数会显示所有系统变量</p><pre><code>set name</code></pre><h3 id="删除变量"><a href="#删除变量" class="headerlink" title="删除变量"></a>删除变量</h3><pre><code>set name=</code></pre><h3 id="算数运算"><a href="#算数运算" class="headerlink" title="算数运算"></a>算数运算</h3><pre><code>set /a 10+4

----------demon.bat文件
@echo off
set /a var=4*3
echo %var%</code></pre><h3 id="接收用户的输入信息（-p）"><a href="#接收用户的输入信息（-p）" class="headerlink" title="接收用户的输入信息（/p）"></a>接收用户的输入信息（/p）</h3><pre><code>----------demon.bat
@echo off
set /p var=请输入一个数字：
echo 你输入的数字是：%var%
pause &gt;nul</code></pre><h2 id="setx设置永久变量"><a href="#setx设置永久变量" class="headerlink" title="setx设置永久变量"></a>setx设置永久变量</h2><h3 id="配置环境变量r"><a href="#配置环境变量r" class="headerlink" title="配置环境变量r"></a>配置环境变量r</h3><pre><code>setx PATH &quot;%path%;文件路径&quot;
需要重新打开窗口才会看到生效</code></pre><h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><pre><code>@echo off
rem 我是解释文字 exit 退出命令
:: 我也是解释文字，你看不见我的
exit 
pause </code></pre><h2 id="特殊字符"><a href="#特殊字符" class="headerlink" title="特殊字符"></a>特殊字符</h2><p>查看上一条命令是否执行成功</p><pre><code>echo %errorlevel%
输出0为成功</code></pre><h3 id="管道符"><a href="#管道符" class="headerlink" title="管道符 |"></a>管道符 |</h3><p>将第一条命令的结果作为第二天命令的参数来执行</p><pre><code>dir C:\ | find &quot;ell&quot; 

netstat -ano |findstr TCP</code></pre><h3 id="组合命令"><a href="#组合命令" class="headerlink" title="组合命令"></a>组合命令</h3><ul><li><p>&amp;</p><ul><li>当第一条命令执行失败了，后边的命令还会继续执行</li><li>输出e盘和f盘的文件：<code>dir e:/ &amp; dir f:/</code></li></ul></li><li><p>&amp;&amp;</p><ul><li>第一条命令失败时，后边的命令不会继续执行</li></ul></li><li><p>||</p><ul><li>第一条命令失败后才执行第二天命令</li></ul></li><li><p>()</p></li><li><p>;</p></li></ul><h2 id="通配符"><a href="#通配符" class="headerlink" title="通配符"></a>通配符</h2><p>? – 单个字符</p><pre><code>输出文件名&lt;=3个字符的文件
dir f:\???</code></pre><p>* – 所有</p><h2 id="if-条件语句"><a href="#if-条件语句" class="headerlink" title="if 条件语句"></a>if 条件语句</h2><p>exist / not exist 存不存在<br>/i 忽略大小写<br>== 判断字符串是否相等<br>equ 判断数值是否相等<br>defined 是否定义</p><pre><code>@echo off
if exist c:\test.txt (echo 存在test文件) else (type nul&gt;c:\test &amp; echo 创建成功)

set var = hello
if defined var (echo 已定义) else (echo 没有被定义)

if /i %var%==&quot;Hello&quot; (echo 相等) else (echo 不相等)
pause &gt;nul</code></pre><h3 id="数值之间的比较"><a href="#数值之间的比较" class="headerlink" title="数值之间的比较"></a>数值之间的比较</h3><table><thead><tr><th align="left">中文含义</th><th align="left">关系符</th><th align="left">英文解释</th></tr></thead><tbody><tr><td align="left">等于</td><td align="left">equ</td><td align="left">equal</td></tr><tr><td align="left">大于</td><td align="left">gtr</td><td align="left">greater than</td></tr><tr><td align="left">大于或等于</td><td align="left">geq</td><td align="left">greater than or equal</td></tr><tr><td align="left">小于</td><td align="left">lss</td><td align="left">less than</td></tr><tr><td align="left">小于或等于</td><td align="left">leq</td><td align="left">less than or equal</td></tr><tr><td align="left">不等于</td><td align="left">neq</td><td align="left">no equal</td></tr></tbody></table><h2 id="for-循环"><a href="#for-循环" class="headerlink" title="for 循环"></a>for 循环</h2><pre><code>cmd控制台写法
for %i in (1 2 3 4 5) do echo %i 

/d 匹配文件夹
for /d %i in (*) do echo %i

-----------------------------------
遍历文件------demo.bat
@echo off
for %%i in (c:\*.txt) do echo %%i
pause &gt;nul

/l 步进 步长为2
for /l %%i in (1,2,10) do echo %%i

打开5次百度
for /l %%i in (1,1,5) do start www.baidu.com

/r 层叠遍历所有子文件
for /r f:\ %%i in (*.txt) do echo %%i

打印出demo.txt中的内容，类似type
for /f &quot;delims=&quot; %%i in (f:\demo.txt) do echo %%i

skip -- 跳过第几列
tokens -- 提取第几列 
for /f &quot;skip=1 tokens=1,2 delims= &quot; %%i in (f:\demo.txt) do echo %%i %%j </code></pre><h2 id="重定向操作符"><a href="#重定向操作符" class="headerlink" title="重定向操作符"></a>重定向操作符</h2><p>&gt;、&gt;&gt;</p><pre><code>会覆盖之前的结果
ping www.baidu.com &gt;c:\test.txt

不覆盖，追加内容
ping www.baidu.com &gt;&gt;c:\test.txt</code></pre><p>&lt;</p><pre><code>读取test.txt内容并排序显示在控制台中
sort &lt; test.txt</code></pre><p>句柄的数字代码描述<br>0：键盘输入<br>1：输出到命令提示窗<br>2：错误输出</p><pre><code>di &gt;right.txt 2&gt;error.txt</code></pre><h2 id="telnet"><a href="#telnet" class="headerlink" title="telnet"></a>telnet</h2><p>telnet 就是查看某个端口是否可访问。</p><pre><code>telnet www.baidu.com 80</code></pre><h2 id="netstat"><a href="#netstat" class="headerlink" title="netstat"></a>netstat</h2><p>-a 所有，-n以数字形式显示，-o 显示进程ID</p><pre><code>netstat -ano</code></pre><h2 id="实战：查询端口被哪个进程占用"><a href="#实战：查询端口被哪个进程占用" class="headerlink" title="实战：查询端口被哪个进程占用"></a>实战：查询端口被哪个进程占用</h2><p>涉及命令：</p><ul><li>netstat 查询tcp/ip连接命令</li><li>tasklist 列举任务进程</li><li>taskkill 杀死任务进程</li><li>taskmgr 打开任务管理器</li></ul><p>1、根据62537端口值查找PID</p><pre><code>netstat -ano |findstr 62537</code></pre><p>2、根据PID查看该任务列表</p><pre><code>tasklist |findstr 5772</code></pre><p>3、杀死该任务<br>taskkill /im notepad.exe /f</p><h2 id="ipconfig"><a href="#ipconfig" class="headerlink" title="ipconfig"></a>ipconfig</h2><p>可用于显示当前的TCP/IP配置，一般用来检验人工配置的TCP/IP设置是否正确</p><table><thead><tr><th align="left">命令</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left">ipconfig /all</td><td align="left">显示本地计算机所有网络连接情况，如：IP地址，子网掩码，DNS配置，DHCP配置等</td></tr><tr><td align="left">ipconfig /release</td><td align="left">释放ip</td></tr><tr><td align="left">ipconfig /renew</td><td align="left">重新获取ip</td></tr><tr><td align="left">ipconfig /flushdns</td><td align="left">刷新DNS</td></tr><tr><td align="left">## net</td><td align="left"></td></tr><tr><td align="left">### net user</td><td align="left"></td></tr><tr><td align="left">打开user管理图形界面</td><td align="left"></td></tr></tbody></table><pre><code>lusrmgr.msc</code></pre><p>查看用户账号</p><pre><code>net user</code></pre><p>创建用户账号</p><pre><code>net user newuser /add</code></pre><p>禁用用户</p><pre><code>net user newuser /active:no</code></pre><p>重新启用</p><pre><code>net user newuser /active:yes</code></pre><p>加入管理员组</p><pre><code>net localgroup administrators newuser /add</code></pre><p>查看是否加入成功</p><pre><code>net user newuser</code></pre><p>从组中移除</p><pre><code>net localgroup administrators newuser /del</code></pre><p>删除账号</p><pre><code>net user newuser /del</code></pre><h3 id="net-share"><a href="#net-share" class="headerlink" title="net share"></a>net share</h3><p>图形界面：<code>compmgmt</code></p><ul><li>net share 查看共享</li><li>net share f=F:/ 共享F盘</li><li>net share f /del 取消共享</li><li>net view \\主机名 查看特定主机共享</li><li>net share disk$=e: 隐藏共享</li></ul><h2 id="服务"><a href="#服务" class="headerlink" title="服务"></a>服务</h2><p><code>services.msc</code></p><p>停止xxx服务</p><pre><code>net stop xxx</code></pre><p>开启xxx服务</p><pre><code>net start xxx</code></pre><h2 id="netsh"><a href="#netsh" class="headerlink" title="netsh"></a>netsh</h2><p>netsh(Network Shell)，网络配置命令行工具，可用来修改windows的ip、网关、dns等信息</p><h3 id="netsh-基本命令"><a href="#netsh-基本命令" class="headerlink" title="netsh 基本命令"></a>netsh 基本命令</h3><p>用法：</p><ol><li>netsh</li><li>int ip</li><li>dump</li></ol><p>备份网络配置</p><pre><code>netsh dump &gt; 路径</code></pre><p>设置静态IP</p><pre><code>set address name=&quot;本地连接&quot; source=static addr=192.168.0.7 mask=255.255.255.0</code></pre><p>设置自动获取IP</p><pre><code>set address name=&quot;本地连接&quot; source=dhcp</code></pre><p>设置其他（网关, DNS等）</p><pre><code>set address name=&quot;本地连接&quot; gateway=127.19.96.1 gwmetric=1</code></pre><h3 id="netsh修复网络故障"><a href="#netsh修复网络故障" class="headerlink" title="netsh修复网络故障"></a>netsh修复网络故障</h3><p><code>netsh winsock reset</code></p><pre><code>作用是重置Winsock目录。如果计算机Winsock配置有问题的话将会导致网络连接等问题，通过重置Winsock目录借以修复网络，可以重新初始化网络环境，以解决由于软件冲突、病毒原因造成的参数错误问题。</code></pre><p><code>netsh int ip reset c:\resetlog.txt</code></p><pre><code>作用是重置TCP/IP协议，相对于卸载并重新安装TCP/IP协议，使其恢复到初始安装操作系统时的状态。</code></pre><h3 id="netsh设置防火墙"><a href="#netsh设置防火墙" class="headerlink" title="netsh设置防火墙"></a>netsh设置防火墙</h3><p>图形界面： <code>firewall.cpl</code></p><p>关闭防火墙</p><pre><code>netsh firewall set opmode mode=disable</code></pre><p>开启防火墙</p><pre><code>netsh firewall set opmode mode=enable</code></pre><h3 id="netsh获取已连接过的wifi密码"><a href="#netsh获取已连接过的wifi密码" class="headerlink" title="netsh获取已连接过的wifi密码"></a>netsh获取已连接过的wifi密码</h3><p>查看当前系统已保存的网络</p><pre><code>netsh wlan show profiles</code></pre><p>查看指定wifi的密码</p><pre><code>netsh wlan show profile name=&quot;ssid&quot; key=clear</code></pre><p>搭建无线网络</p><pre><code>netsh wlan set hostednetwork mode=allow ssid=wname key=123456
netsh wlan start hosted</code></pre><h2 id="shutdown关机设置"><a href="#shutdown关机设置" class="headerlink" title="shutdown关机设置"></a>shutdown关机设置</h2><p>设置120秒后重启</p><pre><code>shutdown /r -t 120</code></pre><p>取消上一条命令</p><pre><code>shutdown /a</code></pre><h2 id="attrib设置文件属性"><a href="#attrib设置文件属性" class="headerlink" title="attrib设置文件属性"></a>attrib设置文件属性</h2><p>查看文件的属性</p><pre><code>attrib demo.txt</code></pre><p>添加只读属性 (h隐藏属性 -删除)</p><pre><code>attrib +r +h demo.txt</code></pre><h2 id="goto-跳转命令"><a href="#goto-跳转命令" class="headerlink" title="goto 跳转命令"></a>goto 跳转命令</h2><pre><code>@echo off
goto part1

:part1
echo hello
pause</code></pre><h2 id="start"><a href="#start" class="headerlink" title="start"></a>start</h2><p>可以在命令行下打开盘符、目录、文件、网址等<br>start /max C:\ ————– 最大化打开C盘<br>start /min</p><p>打开带有空格的文件夹 “aa bb”</p><pre><code>start &quot;&quot; &quot;aa bb&quot;</code></pre><h2 id="call-程序互相调用"><a href="#call-程序互相调用" class="headerlink" title="call 程序互相调用"></a>call 程序互相调用</h2><pre><code>@echo off
call demo.bat
pause</code></pre><h2 id="sort-排序"><a href="#sort-排序" class="headerlink" title="sort 排序"></a>sort 排序</h2><p>从第三个字母进行排序</p><pre><code>sort /+3 demol.txt</code></pre><p>倒序之后保存在1.txt</p><pre><code>sort /r demol.txt &gt; 1.txt
或者
sort /r demol.txt /o 1.txt</code></pre><h2 id="判断网络故障"><a href="#判断网络故障" class="headerlink" title="判断网络故障"></a>判断网络故障</h2><blockquote><p>原因：TCP/IP协议出错、TCP/IP配置出错、物理故障、中毒等</p></blockquote><p>检查本地TCP/IP协议是否安装正常</p><pre><code>ping 127.0.0.1 (localhost)</code></pre><p>检查网关连接是否畅通</p><pre><code>ping 192.168.1.1</code></pre><p>检查电脑与外部网络连接是否畅通</p><pre><code>ping www.baidu.com</code></pre><h2 id="修复系统-系统文件缺失"><a href="#修复系统-系统文件缺失" class="headerlink" title="修复系统 (系统文件缺失)"></a>修复系统 (系统文件缺失)</h2><p><code>sfc /scannow</code> 扫描并尽可能修复保护的系统文件</p><p>系统日志：Windows/Logs/CBS/CBS.log</p><h2 id="磁盘修复"><a href="#磁盘修复" class="headerlink" title="磁盘修复"></a>磁盘修复</h2><p>图形界面：<code>compmgmt</code></p><h3 id="chkdsk-系统当掉或非法关机"><a href="#chkdsk-系统当掉或非法关机" class="headerlink" title="chkdsk (系统当掉或非法关机)"></a>chkdsk (系统当掉或非法关机)</h3><p>修复磁盘上的错误</p><pre><code>chkdsk -f</code></pre><p>查找坏扇区并恢复可读信息</p><pre><code>chkdsk /r</code></pre><h3 id="convert"><a href="#convert" class="headerlink" title="convert"></a>convert</h3><p>把磁盘转为NTFS</p><pre><code>convert f: /fs:ntfs</code></pre><h3 id="diskpart"><a href="#diskpart" class="headerlink" title="diskpart"></a>diskpart</h3><p><code>diskpart</code></p><p>列出有哪些盘符：<code>list disk</code><br>选择磁盘1：<code>select disk 1</code><br>查看详情：<code>detail disk</code><br>选择分区：<code>select partition1</code><br>格式化磁盘：<code>clean</code><br>创建主分区：<code>creat partition primary</code><br>定义磁盘：<code>format fs=ntfs quick label=&quot;E:&quot;</code></p><h2 id="激活系统"><a href="#激活系统" class="headerlink" title="激活系统"></a>激活系统</h2><p>查看系统版本：<code>winver</code><br>查看激活信息：<code>slmgr /dli || slmgr /xpr</code><br>卸载产品密钥：<code>slmgr /upk</code><br>安装产品密钥：<code>slmgr /ipk W269N-WFGWX-YVC9B-4J6C9-T83GX</code><br>设置密钥管理服务器计算机名：<code>slmgr /skms zh.us.to</code><br>成功的激活产品：<code>slmgr /ato</code></p><h2 id="wget下载网路资源"><a href="#wget下载网路资源" class="headerlink" title="wget下载网路资源"></a><a href="https://www.cnblogs.com/hzdx/p/6432161.html" target="_blank" rel="noopener">wget下载网路资源</a></h2><p>下载地址：<a href="https://eternallybored.org/misc/wget/" target="_blank" rel="noopener">https://eternallybored.org/misc/wget/</a><br>wget特点</p><ul><li>支持断点下传功能</li><li>同时支持FTP和HTTP下载方式</li><li>支持代理服务器</li><li>设置方便简单</li><li>程序小，完全免费</li></ul><p>-o, –output-file=FILE 将软件输出信息保存到文件；<br>-i, –input-file=FILE 从文件中取得URL<br>-r, –recursive 下载整个网站，目录（小心使用）<br>-l, –level=NUMBER 下载层次</p><pre><code>命令如下：
wget -r -p -k -np -nc -e robots=off http://www.example.com/mydir/
如果要想下载整个网站，最好去除-np参数。   
wget -r -p -k -nc -e robots=off http://www.example.com/mydir/

-r 递归；对于HTTP主机，wget首先下载URL指定的文件，然后（如果该文件是一个HTML文档的话）递归下载该文件所引用（超级连接）的所有文件（递 归深度由参数-l指定）。对FTP主机，该参数意味着要下载URL指定的目录中的所有文件，递归方法与HTTP主机类似。   
-c 指定断点续传功能。实际上，wget默认具有断点续传功能，只有当你使用别的ftp工具下载了某一文件的一部分，并希望wget接着完成此工作的时候，才 需要指定此参数。

-nc 不下载已经存在的文件
-np 表示不追溯至父目录，不跟随链接，只下载指定目录及子目录里的东西；
-p 下载页面显示所需的所有文件。比如页面中包含了图片，但是图片并不在/yourdir目录中，而在/images目录下，有此参数，图片依然会被正常下 载。

-k 修复下载文件中的绝对连接为相对连接，这样方便本地阅读。
-o down.log 记录日记到down.log
-e robots=off 忽略robots.txt</code></pre><h2 id="reg注册表操作"><a href="#reg注册表操作" class="headerlink" title="reg注册表操作"></a>reg注册表操作</h2><p>图形界面：<code>regedit</code></p><ul><li><code>reg query</code></li><li><code>reg add</code></li><li><code>reg delete</code></li><li><code>reg export</code></li><li><code>reg import</code></li></ul><h2 id="加速网络速度"><a href="#加速网络速度" class="headerlink" title="加速网络速度"></a>加速网络速度</h2><ul><li><code>gpedit</code></li><li><code>ipconfiig /flushdns</code></li><li><code>netsh interface tcp show global</code></li><li><code>netsh interface tcp set global autotuninglevel=normal</code></li></ul><h2 id="批量找出特定后缀名的文件名"><a href="#批量找出特定后缀名的文件名" class="headerlink" title="批量找出特定后缀名的文件名"></a>批量找出特定后缀名的文件名</h2><pre><code>for /r f:\ %i in (*.txt) do echo %i</code></pre><h2 id="清理系统垃圾"><a href="#清理系统垃圾" class="headerlink" title="清理系统垃圾"></a>清理系统垃圾</h2><pre><code>@echo off
echo 请勿关闭本窗口！
echo 正在清除系统垃圾文件，请稍等.....
del /f /s /q %systemdrive%\*.tmp
del /f /s /q %windir%\prefetch\*.* rd /s /q %windir%\temp &amp; md %windir%\temp
del /f /s /q &quot;%userprofile%\Local Settings\Temp\*.*&quot;
del /f /s /q %systemdrive%\*._mp
del /f /s /q %windir%\*.bak
del /f /s /q %systemdrive%\*.log
del /f /s /q %systemdrive%\*.gid
del /f /s /q %systemdrive%\*.chk
del /f /s /q %systemdrive%\*.old
del /f /s /q %systemdrive%\recycled\*.*
del /f /q %userprofile%\cookies\*.*
del /f /q $userprofile%\recent\*.*
del /f /s /q &quot;%userprofile%\Local Settings\Temporary Internet Files\*.*&quot;
echo 清除系统垃圾完成！
pause &gt;nul</code></pre><h2 id="死循环"><a href="#死循环" class="headerlink" title="死循环"></a>死循环</h2><p>会不断打开cmd窗口</p><pre><code>@echo off
start cmd
%0</code></pre><h2 id="提升为临时管理员权限"><a href="#提升为临时管理员权限" class="headerlink" title="提升为临时管理员权限"></a>提升为临时管理员权限</h2><pre><code>runas /noprofile /user:mymachine\administrator cmd

runas /user:mymachine\Administrator /sa &quot;C:\Program Files\Internet Explorer\iexplore.exe&quot;</code></pre><h2 id="系统帐户统一管理"><a href="#系统帐户统一管理" class="headerlink" title="系统帐户统一管理"></a>系统帐户统一管理</h2><pre><code>@echo off
title 账号管理
echo
:start 
echo 1、添加账号    2、删除账号    3、查看已有账号
echo 4、关闭管理员账号    5、开启管理员账号
set /p var=请输入数字：
if not defined var goto start
if %var%==1 goto 1
if %var%==2 goto 2
if %var%==3 goto 3

:1
set str=%random%
net user user%str% /add
goto start

:2
set /p str=请输入要删除的账号：
net user %str% /del

:3
net user
goto start

pause &gt;nul</code></pre><h2 id="文件查询搜索"><a href="#文件查询搜索" class="headerlink" title="文件查询搜索"></a>文件查询搜索</h2><pre><code>@echo off
:start
set /p var=请输入你要搜索的名字:
type demo.txt | findstr %var%

if %var%==exit (goto end) else (goto start)

:end
exit
pause &gt;nul</code></pre><h2 id="IPC-入侵"><a href="#IPC-入侵" class="headerlink" title="IPC$ 入侵"></a>IPC$ 入侵</h2><p>IPC$ 是共享”命名管道”的资源，利用IPC$，连接者甚至可以与目标主机建立一个空的连接而无需用户名与密码（当然，对方机器必须开了IPC$共享，否则你是连接不上的），而利用这个空的连接，连接者还可以得到目标主机上的用户列表（不过负责的管理员会禁止导出用户列表的）。</p><p>建立空连接:</p><pre><code>net use \\IP\ipc$ &quot;&quot; /user:&quot;&quot;</code></pre><p>建立非空连接:</p><pre><code>net use \\IP\ipc$ &quot;用户名&quot; /user:&quot;密码&quot;</code></pre><p>映射默认共享</p><pre><code>net use z: \\IP\c$ &quot;密码&quot; /user:&quot;用户名&quot;
（即可将对方饿c盘映射为自己的z盘，其他盘类推）</code></pre><p>如果已经和目标建立了ipc$，则可以直接用IP+盘符+$访问</p><pre><code>net use z: \\IP\c$</code></pre><p>删除一个ipc$连接</p><pre><code>net use \\IP\ipc$ /del</code></pre><p>删除共享映射</p><pre><code>net use c: /del </code></pre><h2 id="设置IP和DNS"><a href="#设置IP和DNS" class="headerlink" title="设置IP和DNS"></a>设置IP和DNS</h2><p>网路连接界面：<code>ncpa.cpl</code></p><h3 id="静态获取"><a href="#静态获取" class="headerlink" title="静态获取"></a>静态获取</h3><pre><code>echo 开始设置ip和dns...
::设置变量
set name=&quot;WLAN&quot;
set ipaddress=192.168.1.10
set mask=255.255.255.0
set gateway=192.168.1.1
set dns=114.114.114.114
set wins=8.8.8.8

::主体部分
echo 正在设置IP地址
netsh interface ip set address name=%name% source=static addr=%ipaddress% mask=%mask% gateway=%gateway% 
echo 正在设置DNS
netsh interface ip set dns name=&quot;WLAN&quot; source=static addr=%dns%
echo 正在设置备用DNS
netsh interface ip add dns &quot;WLAN&quot; addr=%wins% index2

echo 设置完毕
pause &gt;nul</code></pre><h3 id="动态获取"><a href="#动态获取" class="headerlink" title="动态获取"></a>动态获取</h3><pre><code>@echo off
echo 自动获取IP地址....
netsh interface ip set address name=&quot;WLAN&quot; source = dhcp
echo 自动获取DNS服务器....
netsh interface ip set dns name=&quot;WLAN&quot; source=dhcp
echo 恭喜你，设置成功
pause &gt;nul</code></pre><h2 id="将bat文件转为exe文件"><a href="#将bat文件转为exe文件" class="headerlink" title="将bat文件转为exe文件"></a>将bat文件转为exe文件</h2><ul><li>1、可借助第三方工具：bat to exe</li><li>2、通过自解压软件<ul><li>把.bat文件在到一个文件夹中</li><li>添加到压缩文件，以.exe为后缀名</li><li>在高级-&gt;高级自解压选项-&gt;设置解压路径-&gt;添加自动运行程序</li></ul></li></ul><h2 id="hack-常用命令"><a href="#hack-常用命令" class="headerlink" title="hack 常用命令"></a>hack 常用命令</h2><p><code>systeminfo</code> 查看系统信息<br><code>arp -a</code> 地址映射<br><code>net view</code> 查看局域网内其他计算机名称<br><code>ping -t -l 65550 ip</code> 死亡之ping:<br><code>shutdown -s -t 180 -c &quot;你被黑了，系统马上关机</code> 取消：<code>shutdown -a</code><br><code>msg username hello world</code> 给某用户发送信息<br><code>copy con 123.txt</code> 创建文件 ctrl+Z 回车保存<br><code>start 123.txt</code> 图形界面打开<br><code>type 123.txt</code> 在命令行查看文件<br><code>del 123.txt</code> 删除文件<br><code>tree</code> 树形结构<br><code>net use K: \\192.168.3.100\c$</code> 磁盘映射，内外网都可，防火墙会拦截<br><code>at 22:00 shutdown -s -t 180</code> 设置计划任务<br><code>at</code> 查看所有计划任务<br><code>at id号</code> 开启已注册的某个计划任务<br><code>at /delete</code> 停止所有计划任务，用参数/yes则不需要确认就直接停止<br><code>at id号 /delete</code> 停止某个已注册的计划任务</p></div><footer class="article-footer"><a data-url="https://liserlzhy.github.io/2019/09/18/computer/DOS/" data-id="ck4uv3d6y000z1puo6kligijk" class="article-share-link">Share</a><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/node-api/" rel="tag">node api</a></li></ul></footer></div></article></div><div><article id="post-others/git-command" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><time class="article-date" datetime="2019-08-13T15:50:12.000Z" itemprop="datePublished">2019-08-13</time><div class="article-category"><a class="article-category-link" href="/blog/categories/others/">others</a></div></div><div class="article-inner"><header class="article-header"><h1 itemprop="name"><a class="article-title" href="/blog/2019/08/13/others/git-command/">git 基本命令</a></h1></header><div class="article-entry" itemprop="articleBody"><h2 id="git-命令"><a href="#git-命令" class="headerlink" title="git 命令"></a>git 命令</h2><h3 id="设置-git-全局邮箱和用户名"><a href="#设置-git-全局邮箱和用户名" class="headerlink" title="设置 git 全局邮箱和用户名"></a>设置 git 全局邮箱和用户名</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name &quot;yourgithubname&quot;</span><br><span class="line">git config --global user.email &quot;yourgithubemail&quot;</span><br></pre></td></tr></table></figure><h3 id="设置-ssh-key"><a href="#设置-ssh-key" class="headerlink" title="设置 ssh key"></a>设置 ssh key</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 查看密钥是否存在</span><br><span class="line">ls ~/.ssh</span><br><span class="line"></span><br><span class="line"># 生成密钥</span><br><span class="line">ssh-keygen -t rsa -C &quot;youremail&quot;</span><br><span class="line"></span><br><span class="line"># 查看密钥，并把它复制到 github 或者 codding 等相关平台</span><br><span class="line">cat ~/.ssh/id_rsa_pub</span><br><span class="line"></span><br><span class="line"># 最后验证一下</span><br><span class="line">ssh -T git@github.com</span><br><span class="line">ssh -T git@git.codding.net   #或者 codding 平台</span><br></pre></td></tr></table></figure><h3 id="创建分支"><a href="#创建分支" class="headerlink" title="创建分支"></a>创建分支</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -b 分支名称</span><br></pre></td></tr></table></figure><table><thead><tr><th align="left">命令</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">git add .</td><td align="left">将修改的代码添加到暂存区 (. 代表当前目录)</td></tr><tr><td align="left">git commit -m “message”</td><td align="left">将缓存区的内容添加到本地仓库</td></tr><tr><td align="left">git status</td><td align="left">查看当前暂存区状态</td></tr><tr><td align="left">git remote add origin 仓库地址</td><td align="left">添加远程仓库</td></tr><tr><td align="left">git push -u origin master</td><td align="left">把本地仓库推送到远程服务器</td></tr><tr><td align="left">git log [<option>]</option></td><td align="left">查看版本演变历史 option: <code>--all</code>（所有分支） <code>--graph</code>（图形化显示当前分支日志信息） <code>-nm</code>（m表示数字，显示当前分支最近m次的提交记录日志信息） <code>--oneline</code>（当前分支简要日志信息）</td></tr><tr><td align="left">git remote show [remote-name]</td><td align="left">查看某个远程仓库的详细信息，例如：git remote show origin</td></tr><tr><td align="left">git pull [<options>] [<repos>] [<refspec>…]</refspec></repos></options></td><td align="left">从一个仓库或本地分支拉取并且整合代码&lt;refspec&gt;表示分支的名字，options: <code>--allow-unrelated-histories</code>（允许无关历史）<code>-ff</code> <code>-no-ff</code> <code>-ff-only</code> ff (fast-forward) 表示快速合并</td></tr><tr><td align="left">git reset –merge</td><td align="left">回退</td></tr></tbody></table><h2 id="问题解决"><a href="#问题解决" class="headerlink" title="问题解决"></a>问题解决</h2><h3 id="连接超时错误"><a href="#连接超时错误" class="headerlink" title="连接超时错误"></a>连接超时错误</h3><p>出现以下错误：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ssh: connect to host github.com port 22: Connection timed out</span><br><span class="line">fatal: Could not read from remote repository.</span><br><span class="line"></span><br><span class="line">Please make sure you have the correct access rights</span><br><span class="line">and the repository exists.</span><br></pre></td></tr></table></figure><p>解决办法：</p><ol><li>打开 git 的安装目录中的 <code>etc/ssh/ssh_config</code> 文件，添加以下代码</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Host github.com</span><br><span class="line">User youremail@qq.com</span><br><span class="line">Hostname ssh.github.com</span><br><span class="line">PreferredAuthentications publickey</span><br><span class="line">IdentityFile ~/.ssh/id_rsa</span><br><span class="line">Port 443</span><br></pre></td></tr></table></figure><ol start="2"><li>在 git 命令窗口中输入 <code>ssh -T git@gitub.com</code>，按照提示输入yes，最后会出现下面的提示</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hi xxx! You&apos;ve successfully authenticated, but GitHub does not provide shell access.</span><br></pre></td></tr></table></figure><h3 id="系统换行符不同导致的警告"><a href="#系统换行符不同导致的警告" class="headerlink" title="系统换行符不同导致的警告"></a>系统换行符不同导致的警告</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">warning: LF will be replaced by CRLF in source/_posts/others/browser-rendering.md.</span><br><span class="line">The file will have its original line endings in your working directory.</span><br></pre></td></tr></table></figure><p>git 采用 linux（换行符为\n） 规范，若文件中存在\r\n符号，它会自动帮你转为 \n, 可使用下列命令消除警告</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config core.filemode false</span><br><span class="line">git config core.eol crlf</span><br></pre></td></tr></table></figure></div><footer class="article-footer"><a data-url="https://liserlzhy.github.io/2019/08/13/others/git-command/" data-id="ck4uv3d6l000d1puo4s52f528" class="article-share-link">Share</a><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/git/" rel="tag">git</a></li></ul></footer></div></article></div><nav id="page-nav"><a class="extend prev" rel="prev" href="/blog/page/2/">上一页</a><a class="page-number" href="/blog/">1</a><a class="page-number" href="/blog/page/2/">2</a><span class="page-number current">3</span></nav></section><aside id="sidebar"><div class="widget-wrap"><h3 class="widget-title">分类</h3><div class="widget"><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/browser/">browser</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/computer/">computer</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/database/">database</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/js/">js</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/node/">node</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/others/">others</a></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">标签</h3><div class="widget"><ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Vue/" rel="tag">Vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/git/" rel="tag">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/node-api/" rel="tag">node api</a></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">标签云</h3><div class="widget tagcloud"><a href="/blog/tags/Vue/" style="font-size:10px">Vue</a> <a href="/blog/tags/git/" style="font-size:10px">git</a> <a href="/blog/tags/node-api/" style="font-size:20px">node api</a></div></div><div class="widget-wrap"><h3 class="widget-title">归档</h3><div class="widget"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2019/12/">十二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2019/11/">十一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2019/10/">十月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2019/09/">九月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2019/08/">八月 2019</a></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">最新文章</h3><div class="widget"><ul><li><a href="/blog/2019/12/30/database/mysql/">mysql</a></li><li><a href="/blog/2019/12/28/vue/vue-core/">vue 的核心原理</a></li><li><a href="/blog/2019/12/22/database/mongodb/">mongodb</a></li><li><a href="/blog/2019/12/07/js/fullscreen/">fullscreenchange</a></li><li><a href="/blog/2019/12/02/js/shadow-dom/">Shadow DOM</a></li></ul></div></div></aside><span id="toTopBtn" class="icon icon-angle-up"></span></div><footer id="footer"><div id="right-footer"><div id="social-media-footer"><ul><li><a href="https://github.com/liserlzhy/blog" target="_blank" rel="noopener" class="icon icon-github"></a></li></ul></div></div></footer></div></div><script src="/blog/js/jquery.min.js"></script><link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.css"><script src="/blog/fancybox/jquery.fancybox.pack.js"></script><script src="/blog/js/script.js"></script><script src="/blog/js/search.js"></script><script type="text/javascript">var search_path="search.xml";0==search_path.length&&(search_path="search.xml");var path="/blog/"+search_path;searchFunc(path,"slidedown-search-input","slidedown-search-result"),searchFunc(path,"nav-search-input","nav-search-result")</script></body><!-- rebuild by neat -->